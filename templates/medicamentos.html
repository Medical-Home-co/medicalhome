<div id="meds-form-modal" class="modal-overlay hidden">
    <div class="modal-content" style="text-align: left; max-width: 500px;">
        <h2 id="form-title" class="modal-title">Agregar Medicamento</h2>
        <p class="modal-subtitle">Completa la información del medicamento.</p>

        <form id="med-form" class="modal-form" style="margin-top: 1.5rem;">
            <input type="hidden" id="med-id">
            <div class="form-group">
                <label for="med-name">Nombre del Medicamento *</label>
                <input type="text" id="med-name" name="name" class="form-input" required>
            </div>
            <div class="form-group">
                <label for="med-dose">Dosis *</label>
                <input type="text" id="med-dose" name="dose" class="form-input" placeholder="Ej: 10mg, 1 pastilla, 5ml" required>
            </div>

            <div class="form-group">
                <label>Frecuencia *</label>
                <select id="med-frequency" name="frequency" class="form-input">
                    <option value="1">1 vez/día (cada 24 horas)</option>
                    <option value="2">2 veces/día (cada 12 horas)</option>
                    <option value="3">3 veces/día (cada 8 horas)</option>
                    <option value="4">4 veces/día (cada 6 horas)</option>
                    <option value="custom">Otra frecuencia</option>
                </select>
            </div>

            <div id="custom-frequency-container" class="form-grid hidden" style="gap: 0.5rem 1rem; align-items: center;">
                <p style="grid-column: span 2; font-size: 0.9rem; color: var(--text-secondary);">Tomar cada:</p>
                <input type="number" id="custom-freq-number" name="custom_number" class="form-input" value="1" min="1">
                <select id="custom-freq-unit" name="custom_unit" class="form-input">
                    <option value="dias">día(s)</option>
                    <option value="semanas">semana(s)</option>
                    <option value="meses">mes(es)</option>
                </select>
            </div>

            <div id="med-schedules-container" class="form-group">
                <label>Horario(s) *</label>
                 </div>

            <div class="form-group">
                <label for="med-notes">Notas (Opcional)</label>
                <textarea id="med-notes" name="notes" class="form-input" placeholder="Ej: Tomar con comida..."></textarea>
            </div>

            <div class="modal-actions" style="margin-top: 1.5rem; display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <button type="submit" class="button button-primary" style="width: 100%;">Guardar</button>
                <button type="button" id="cancel-med-btn" class="button button-secondary" style="width: 100%;">Cancelar</button>
            </div>
            </form>
    </div>
</div>

<div class="page-container">

    <div class="page-header">
        <div>
            <h2 class="page-title">Medicamentos</h2>
            <p class="page-subtitle">Tu lista de medicamentos actual.</p>
        </div>
        <button id="add-med-main-btn" class="button button-primary hidden">
            <img src="images/icons/plus.svg" alt="Agregar" class="button-icon hidden" style="filter: invert(1);">
            <span>+ Agregar</span>
        </button>
    </div>

    <div id="meds-list-container" class="content-grid">
        </div>

    <div id="meds-empty-state" class="empty-state-container hidden" style="text-align: center; margin-top: 4rem;">
        <h2 class="modal-title">Gestiona tus medicamentos</h2>
        <img src="images/medicamentos.png" alt="Icono de Medicamentos" style="width: 128px; height: 128px; margin: 1.5rem auto;">
        <p class="modal-subtitle" style="max-width: 400px; margin: 0 auto 1.5rem;">Comienza agregando tus medicamentos para recibir recordatorios y llevar un mejor control.</p>
        <button id="add-med-initial-btn" class="button button-primary">Agregar Medicamento</button>
    </div>
</div>